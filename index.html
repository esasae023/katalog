<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Katalog Produk</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
    }
  </script>
  <style>
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-thumb {
      background-color: rgba(100, 100, 100, 0.5);
      border-radius: 10px;
    }
  </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">

  <!-- Header -->
  <header class="sticky top-0 z-50 backdrop-blur-md bg-white/70 dark:bg-gray-900/70 shadow-sm">
    <div class="container mx-auto px-4 py-4 flex flex-col sm:flex-row justify-between items-center gap-4">
      <div class="flex items-center gap-3">
        <img src="logo.png" alt="Logo" class="w-10 h-10 rounded-full" />
        <h1 class="text-xl font-bold">Katalog Produk</h1>
      </div>

      <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
        <input type="text" id="searchInput" placeholder="Cari produk..." class="px-3 py-1 rounded bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 w-full sm:w-64">
        <select id="categoryFilter" class="p-2 rounded bg-gray-100 dark:bg-gray-800 dark:text-white">
          <option value="all">Semua Kategori</option>
          <option value="pertanian">Pertanian</option>
          <option value="kesehatan">Kesehatan</option>
          <option value="kecantikan">Kecantikan</option>
          <option value="rumah">Rumah Tangga</option>
        </select>
        <button id="toggleTheme" class="px-3 py-1 rounded bg-gray-300 dark:bg-gray-700 text-sm">
          ðŸŒž / ðŸŒ™
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto px-4 mt-6 mb-10">
    <div id="productGrid" class="grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3">
      <!-- Produk akan dirender oleh JS -->
    </div>
  </main>

  <!-- Modal Detail -->
  <div id="productModal" class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center z-50">
    <div class="bg-white dark:bg-gray-800 p-6 rounded shadow-lg max-w-md w-full relative">
      <button onclick="closeModal()" class="absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl">Ã—</button>
      <img id="modalImage" src="" alt="Produk" class="w-full h-48 object-cover rounded mb-4" />
      <h2 id="modalTitle" class="text-xl font-bold mb-2"></h2>
      <p id="modalDescription" class="mb-4 whitespace-pre-line"></p>
      <a id="modalLink" href="#" target="_blank" class="inline-flex items-center px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" class="w-5 h-5 mr-2" alt="WA"/>
        Pesan
      </a>
    </div>
  </div>

  <!-- JS Logic -->
  <script>
    const WA_LINK = "https://wa.me/6285327068676/?text=apakah%20produk%20ini%20masih%20ada%3F";

    const products = [
      {
        title: 'Crystal X Tissue',
        category: 'kecantikan',
        description: 'CRYSTAL-X TISSUE (External Feminine Hygiene)\n Merupakan Produk CRYSTAL-X membantu membersihkan area kewanitaan serta mengurangi bau tidak sedap di Area Kewanitaan dan Sekitarnya.\n \n Isi 5 Sachet @15ml\n POM NA18231600219',
        image: 'CRYSTAL-X-TISSUE.jpeg'
      },
      {
        title: 'Sabun Karu Vanila',
        category: 'kesehatan',
        description: 'Sabun mandi alami.\nAroma vanila yang lembut.\nMelembapkan kulit kering.',
        image: 'KARU-VANILA.jpeg'
      },
      {
        title: 'Susu Kambing Etawa',
        category: 'pertanian',
        description: 'Susu kambing asli.\nKaya manfaat bagi kesehatan.\nBaik untuk anak-anak hingga dewasa.',
        image: 'SKE72-SUSU-KAMBING-ETAWA.jpeg'
      },
      {
        title: 'Set Alat Masak',
        category: 'rumah',
        description: 'Peralatan masak anti lengket.\nTahan lama dan mudah dibersihkan.\nLengkap untuk kebutuhan dapur.',
        image: 'https://source.unsplash.com/400x300/?kitchen,cooking'
      },
      {
        title: 'Crystal X Tissue',
        category: 'kecantikan',
        description: 'CRYSTAL-X TISSUE (External Feminine Hygiene)\n Merupakan Produk CRYSTAL-X membantu membersihkan area kewanitaan serta mengurangi bau tidak sedap di Area Kewanitaan dan Sekitarnya.\n \n Isi 5 Sachet @15ml\n POM NA18231600219',
        image: 'CRYSTAL-X-TISSUE.jpeg'
      },
      {
        title: 'Sabun Karu Vanila',
        category: 'kesehatan',
        description: 'Sabun mandi alami.\nAroma vanila yang lembut.\nMelembapkan kulit kering.',
        image: 'KARU-VANILA.jpeg'
      },
      {
        title: 'Susu Kambing Etawa',
        category: 'pertanian',
        description: 'Susu kambing asli.\nKaya manfaat bagi kesehatan.\nBaik untuk anak-anak hingga dewasa.',
        image: 'SKE72-SUSU-KAMBING-ETAWA.jpeg'
      },
      {
        title: 'Set Alat Masak',
        category: 'rumah',
        description: 'Peralatan masak anti lengket.\nTahan lama dan mudah dibersihkan.\nLengkap untuk kebutuhan dapur.',
        image: 'https://source.unsplash.com/400x300/?kitchen,cooking'
      },
      {
        title: 'Crystal X Tissue',
        category: 'kecantikan',
        description: 'CRYSTAL-X TISSUE (External Feminine Hygiene)\n Merupakan Produk CRYSTAL-X membantu membersihkan area kewanitaan serta mengurangi bau tidak sedap di Area Kewanitaan dan Sekitarnya.\n \n Isi 5 Sachet @15ml\n POM NA18231600219',
        image: 'CRYSTAL-X-TISSUE.JPEG'
      },
      {
        title: 'Sabun Karu Vanila',
        category: 'kesehatan',
        description: 'Sabun mandi alami.\nAroma vanila yang lembut.\nMelembapkan kulit kering.',
        image: 'KARU-VANILA.jpeg'
      },
      {
        title: 'Susu Kambing Etawa',
        category: 'pertanian',
        description: 'Susu kambing asli.\nKaya manfaat bagi kesehatan.\nBaik untuk anak-anak hingga dewasa.',
        image: 'SKE72-SUSU-KAMBING-ETAWA.jpeg'
      },
      {
        title: 'Set Alat Masak',
        category: 'rumah',
        description: 'Peralatan masak anti lengket.\nTahan lama dan mudah dibersihkan.\nLengkap untuk kebutuhan dapur.',
        image: 'https://source.unsplash.com/400x300/?kitchen,cooking'
      }
    ];

    function renderProducts(filter = "all", keyword = "") {
      const container = document.getElementById("productGrid");
      container.innerHTML = "";

      const filtered = products.filter(p => {
        const matchCategory = filter === "all" || p.category === filter;
        const matchKeyword = p.title.toLowerCase().includes(keyword.toLowerCase());
        return matchCategory && matchKeyword;
      });

      if (filtered.length === 0) {
        container.innerHTML = '<p class="col-span-full text-center text-gray-500 dark:text-gray-400">Tidak ada produk ditemukan.</p>';
        return;
      }

      filtered.forEach((product, i) => {
        const card = document.createElement("div");
        card.className = "bg-gray-100 dark:bg-gray-800 p-4 rounded shadow flex flex-col justify-between";
        card.innerHTML = `
          <img src="${product.image}" alt="${product.title}" class="w-full h-40 object-cover rounded mb-3" />
          <div>
            <h3 class="text-lg font-bold">${product.title}</h3>
            <p class="text-sm mt-1">${product.description.split('\n')[0]}...</p>
          </div>
          <div class="mt-4 flex gap-2">
            <button onclick="openModal(${i})" class="text-blue-600 dark:text-blue-400 underline">Detail</button>
            <a href="${WA_LINK}" target="_blank" class="ml-auto inline-flex items-center px-3 py-1 bg-green-500 hover:bg-green-600 text-white rounded text-sm">
              <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" class="w-4 h-4 mr-1" alt="WA"/>
              Pesan
            </a>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function openModal(index) {
      const product = products[index];
      document.getElementById("productModal").classList.remove("hidden");
      document.getElementById("productModal").classList.add("flex");

      document.getElementById("modalTitle").innerText = product.title;
      document.getElementById("modalDescription").innerText = product.description;
      document.getElementById("modalLink").href = WA_LINK;
      document.getElementById("modalImage").src = product.image;
    }

    function closeModal() {
      document.getElementById("productModal").classList.add("hidden");
    }

    document.getElementById("categoryFilter").addEventListener("change", (e) => {
      renderProducts(e.target.value, document.getElementById("searchInput").value);
    });

    document.getElementById("searchInput").addEventListener("input", (e) => {
      renderProducts(document.getElementById("categoryFilter").value, e.target.value);
    });

    document.getElementById("toggleTheme").addEventListener("click", () => {
      document.documentElement.classList.toggle("dark");
    });

    renderProducts();
  </script>
</body>
</html>
